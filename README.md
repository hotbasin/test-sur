# Тестовое задание  для Backend-разработчиков Системы Управления Ресурсами #

## Содержание ##

[1. Условия задания](#условия-задания)    
[2. ](#)    
[3. ](#)    
[4. Описание решения](#описание-решения)    
[5. Результат](#результат)    
[6. Инструкция по запуску проекта](#инструкция-по-запуску-проекта)    

## Условия задания ##

Реализовать REST API с тремя http-методами:

1. **`POST /v1/auth/register`**    
    Принимает json:
    ```text
    {
        "phone": "+79167003020",
        "login": "rubella19",
        "password": "1Qwerty!",
        "name": "Анастасия",
        "birth": "2000-07-28",
        "tg": "@Rubella19",
        "email": "anastasia.a.krasnova@gmail.com"
    }
    ```

    При этом **`Phone`**, **`name`**, **`birth`**, **`login`**,
    **`password`**&nbsp;&mdash; обязательные, **`tg`**, **`email`**&nbsp;&mdash;
    необязательные поля.    
    Требуется реализовать проверки валидности данных.    
    В сервисе не должны быть зарегистрированы несовершеннолетние.

    Возвращает **json** с идентификатором пользователя в случае успеха, в случае
    ошибки возвращает **json** с двумя полями **`Код`** и **`Текст`**.

2. **`POST /v1/auth/login`**    
    Принимает **json** с логином паролем и возвращает **json** с идентификатором
    пользователя в случае успеха, в случае ошибки возвращает **json** с двумя
    полями **`Код`** и **`Текст`**.

3. **`GET /v1/user`**    
    С query-параметром **`id`**, возвращает **json** со всеми полями
    пользователя (кроме пароля) или **`Код-Текст`** ошибки.

Все данные сохранять в базе.
На выходе:

- репозиторий с кодом
- SQL script для создания схемы БД (должен лежать в репозитории)
- конфиг приложения, где можно указать конфиг БД
- подписать в **README** какую базу данных использовали
- написать в **README** как запустить проект

**Advanced**: добавить скрипты для запуска API. Например, добавить `Makefile` с
таргетом `run`, который должен запустить сделанный API на порту 8080.

[:arrow_up: Содержание](#содержание)

----

## Описание решения ##

Для демонстрации работы API принято решение использовать простой web-сервер
**Bottle** и СУБД **SQLite** вместо **Django** и **PostgreSQL**, чтобы уложиться
в сроки.

[:arrow_up: Содержание](#содержание)

----

## Результат ##

[:arrow_up: Содержание](#содержание)

----

## Инструкция по запуску проекта ##

1. На компьютере должен быть установлен **Python** версии **3.8** или более
поздней и соответствующий пакетный менеджер **pip**.
2. Скачать файлы проекта из текущей директории репозитория в локальную
директорию компьютера.
3. Примерная последовательность команд в консоли терминала для запуска проекта
в виртуальном окружении `virtualenv` в локальной директории:    

    ```bash
    python -m venv VENV

    # для ОС Linux:
    source VENV/bin/activate
    # или для ОС Windows:
    VENV\Scripts\activate

    pip install -r requirements.txt

    python api_demo.py
    # Выход по Ctrl+C
    ```

Для проверки можно использовать **`httpie`**. Если нет, можно дополнительно
установить в текущем виртуальном окружении:

    ```bash
    pip install httpie
    ```

и сделать запросы вида:

```bash
http POST http://127.0.0.1:8080/v1/auth/register phone=+79167003020 login=rubella19 password=1Qwerty! name=Анастасия birth=2000-07-28 tg=\@Rubella19 email=anastasia.a.krasnova@gmail.com

http POST http://127.0.0.1:8080/v1/auth/login login=rubella19 password=1Qwerty!

http GET http://127.0.0.1:8080/v1/user?id=12345678
```

[:arrow_up: Содержание](#содержание)

----
